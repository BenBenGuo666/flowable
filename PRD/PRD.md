## 一、项目概述
### 1.1 背景

Flowable 7.1.0 是新一代轻量级、云原生流程引擎，具备强大的 BPMN、CMMN、DMN 支持能力。但当前版本未提供官方 UI 控制台（与 Flowable 6.x 不同），
导致：\
流程模型管理需通过 API / 文件导入；\
无法直观管理流程部署、实例运行、任务、用户；\
不便于业务用户参与设计与监控。\
因此，本项目目标是为 Flowable 7.1.0 设计一套现代化、模块化、可扩展的 UI 管理与建模系统，以提升使用体验并降低接入门槛。

### 1.2 产品目标
目标	描述\
🚀 统一管理	提供从模型设计、部署、实例运行到监控的一体化管理能力\
🧩 模块化	前后端分层清晰，可独立部署或嵌入现有平台\
💡 可视化	拖拽式流程建模与实例监控视图\
🔐 安全性	支持 OAuth2 / JWT / SSO 等认证方式\
🌐 可国际化	支持中英文切换、前端国际化配置\
与 Flowable 的 REST API 无缝对接（参考官方教程）。\

## 二、 模块划分
前端主要模块结构：
/src\
├─ dashboard               # 首页与全局概览\
├─ process-modeler         # 流程建模模块\
├─ process-instances       # 流程实例与运行监控\
├─ task-center             # 任务中心\
├─ form-designer           # 表单设计器\
├─ decision-tables         # DMN 决策表\
├─ identity-management     # 用户与角色管理\
├─ settings                # 系统配置（安全、网关、引擎配置）\
└─ shared/components       # 通用组件库

## 三、系统模块划分（UI-视角）
Dashboard／首页：总览统计、快速入口。\
流程模型管理：模型列表／新建／编辑／版本管理／部署。\
流程运行监控：实例列表／详情（流程图 + 当前状态）／操作（暂停、终止、续跑）。\
任务中心：我的待办／已办／审批操作界面。\
表单设计器：拖拽组件、绑定流程变量、预览。\
决策表管理：DMN 决策表编辑、测试、版本。\
身份及权限管理：用户、角色、组织管理、安全配置。\
系统设置／监控：系统参数、安全策略、性能图表。

## 四、关键界面需求概述
### 4.1 流程模型管理
提供可视化流程模型的全生命周期管理能力，包括创建、编辑、保存、版本控制、部署与导出导入。\
功能列表:\
模型列表：查看、筛选所有流程模型\
模型创建：从空白模板或已存在模板创建\
流程设计：拖拽节点、配置属性、保存版本\
模型部署：将模型部署为可执行流程定义\
模型导入导出：支持 BPMN XML 导入导出\
版本管理：查看、回滚历史版本

## 4.2 流程实例管理
查看实例列表、实例详情、操作控制、变量查看、执行轨迹\
功能列表:\
实例列表：展示运行中与历史流程实例\
实例详情：展示流程图、节点状态\
操作控制：支持挂起、激活、终止\
变量查看：展示流程上下文变量\
执行轨迹：展示节点审批历史与操作日志

## 4.3 任务中心
提供我的待办、已办任务、任务审批、发起流程、通知提醒操作入口，支持流程发起与动态表单。
功能列表:
我的待办：显示当前用户待处理任务
已办任务：历史处理任务记录
任务审批：表单填写、意见提交、同意/驳回/转办
发起流程：流程选择与启动表单
通知提醒：WebSocket 实时推送任务变更

## 4.4 表单设计器
提供可视化的拖拽式表单设计能力，用于流程节点配置、任务表单或流程启动表单。
功能列表:
表单列表：查看所有表单定义，支持搜索、分类、版本
表单创建：从模板或空白表单创建
可视化设计：拖拽控件、配置属性、保存版本
表单预览：实时渲染效果预览
表单发布：将表单绑定到流程定义或节点
表单导入导出：JSON 格式导入导出

## 4.5 决策表（DMN）管理
提供业务规则（Decision Table）的可视化管理，支持在流程节点中引用 DMN 决策逻辑。\
功能列表:\
决策表列表：查看所有决策表（DMN Definition）\
创建决策表：可视化创建输入输出规则\
编辑规则：单元格编辑输入/输出条件\
测试模拟：输入参数模拟运行结果\
版本管理：支持版本发布与历史查看\
绑定流程：可配置节点调用决策表\

## 4.6 身份与权限管理
建立基于角色的访问控制（RBAC）体系，实现用户、角色、权限点的统一管理。\
功能列表:\
用户管理：新建、编辑、禁用用户\
角色管理：定义角色、关联权限\
权限点管理：菜单、按钮、API 权限\
租户管理：多租户用户与资源隔离\
审计日志：登录、操作记录追踪\

## 4.7 系统设置与监控
目标：提供系统运行状态、流程统计与健康检查。\
功能列表:\
仪表盘：流程定义数、活跃实例数、任务数统计\
性能趋势：流程执行耗时趋势图、任务量折线图\
健康检查：引擎连接状态、数据库状态\
参数配置：REST API 地址、租户配置、安全参数\
安全策略：CSP、CORS、Token过期策略配置\

## 五、界面体验与交互原则
1.菜单侧边栏 + 顶部导航：模块清晰、入口直达。\
2.统一视觉风格、控件规范（按钮、表格、表单）保证一致性。\
3.拖拽操作需流畅、反馈明确（如拖进画布自动对齐、节点被选中高亮）。\
4.表单／任务界面要清晰，审批流程要简单直观。\
5.国际化支持：UI 文案由资源文件管理，默认中英文切换。\
6.移动端／平板简单适配，但主要以桌面为主。

### 苹果设计理念
苹果的交互哲学虽然诞生于硬件与原生 App 场景，但它的核心思想完全可以**迁移到 Web 前端**，特别适合希望产品“更高级、自然、有温度”的小团队。\
 **“Apple 风格 Web 交互原则（团队适用版）”**\
—— 兼顾理性（工程可落地）与感性（用户体验一致性），非常适合小型产品或创业团队作为前端体验准则使用。

---

## 🍏 一、核心理念：让用户“懂你在做什么”

### 1️⃣ 清晰（Clarity）

* 所有界面元素都必须“表达清楚自己能做什么”。
* 不要让用户猜：按钮、链接、卡片、输入框都要在视觉上有明显差异。
* 不要滥用动效和装饰，让界面传达信息而不是展示创意。

> ✅ 提示：
>
> * 主动用视觉（颜色、阴影、动画）传达状态变化。
> * 所有交互动作都应该能**在 0.3 秒内得到反馈**。

---

### 2️⃣ 一致（Consistency）

* 所有相似的元素、交互逻辑在全站保持一致。
* 同一个按钮风格，不因为不同页面而改变语气、位置或颜色。
* 保持文案语气、组件间距、输入反馈、加载动画的一致性。

> ✅ 工程落地建议：
>
> * 建立一个 **Design Token + 组件库（UI Kit）**。
> * 所有按钮、输入框、弹窗都只从 UI 库生成，不手写样式。

---

### 3️⃣ 直觉（Intuition）

* 用户操作不需要教程，依靠视觉暗示就能理解。
* 用用户熟悉的交互模式（例如滑动、点击、拖拽）。
* 鼠标悬停（hover）或轻微动效提示下一步动作。

> ✅ 小团队可以用：
>
> * Hover 动效表示可点击；
> * Loading 统一用渐隐或旋转图标，不突兀切换；
> * 避免隐藏关键操作（例如只出现在右键菜单里）。

---

## 🎨 二、视觉体验：清爽、留白、轻反馈

### 1️⃣ 留白是设计的一部分

不要急着填满空间。留白可以：

* 让视觉节奏更自然；
* 提升信息层级感；
* 让产品显得“高端且从容”。

> ✅ 实用规则：
>
> * 主要区块间距不小于 24px；
> * 元素组之间留有呼吸空间（padding 比 margin 更重要）。

### 2️⃣ 动效要轻，不要炫

苹果式动效遵循一个原则：**动效是语言，不是烟花。**

* 动画时间 150~300ms；
* 方向、透明度、缩放要表达逻辑关系（例如进入/退出/层级变化）；
* 用 easing 函数（ease-in-out / spring）模拟自然节奏。

> ✅ 推荐做法：
>
> * 页面切换用淡入淡出（fade）；
> * 弹窗出现用 scale-in（轻微放大弹出）；
> * 按钮点击用微缩（scale 0.98 → 1.0）。

---

## 🧭 三、交互逻辑：减少用户的思考成本

### 1️⃣ 行为可预期（Predictable）

* 用户点击后一定要知道发生了什么（加载、成功、错误）。
* 状态切换必须伴随视觉或文案反馈。
* “空白状态（Empty State）”也要设计清楚，让用户知道接下来该做什么。

### 2️⃣ 操作可撤销（Undoable）

* 永远避免“不可逆”的动作（尤其删除）。
* 给用户一个可见的“撤销”或“确认”机会。
* 模态弹窗不滥用，重要操作才需要。

> ✅ 小团队落地例子：
>
> * 删除用 “撤销” toast 而不是确认弹窗；
> * 加载出错要告诉用户“重试”选项。

---

## 💬 四、语言与情感设计（Microcopy）

苹果式文案讲究“有温度、无情绪”：

* 用动词开头：**“保存更改”** 而不是 “确认”；
* 避免负面语气：**“再试一次”** 比 “出错了” 更友好；
* 短句优先，每个提示不超过两行；
* 避免内部术语，用户看得懂的语言才是好语言。

> ✅ 小团队模板：
>
> * 成功：`已完成！`
> * 加载：`正在准备中…`
> * 错误：`出了一点问题，请再试一次。`

---

## ⚙️ 五、系统一致性与技术落地

### 1️⃣ 使用组件系统化

小团队可以用 **Design System Lite** 的方式建立一致性：

* 按钮、输入框、弹窗、导航条、Loading、空状态 → 全部封装成可复用组件；
* 样式统一由 token 控制（颜色、阴影、圆角、动效曲线等）；
* 不在页面中直接写 CSS，而通过组件属性驱动。

> ✅ 推荐栈：
>
> * **Angular/React + Tailwind + Framer Motion**
> * **Storybook / Figma** 做组件文档
> * 颜色、阴影、字号统一定义在 `design-tokens.json`

### 2️⃣ 保证性能即体验

前端交互再好，也要跑得顺：

* 首屏渲染 < 2 秒；
* 动效保持 60fps；
* 懒加载非关键资源；
* 页面切换时避免闪烁或卡顿。

> “流畅是最重要的交互。” —— Apple HIG

---

## 🧩 六、团队内部执行建议

1. **一页文档 + 一张图：**
   把这些原则做成简明版（类似“前端体验十诫”），贴在设计评审文档里。

2. **体验评审机制：**
   每次上线前由 1 人负责体验审核（动效一致性、反馈清晰度、视觉节奏）。

3. **从细节出品牌：**

    * 鼠标 hover 的缓动曲线；
    * 成功提示的渐隐方式；
    * Loading 状态的语气；
      都是你产品“质感”的一部分。

---

## ✴️ 七、总结：小团队的 Apple 风格 Web 准则

| 原则 | 含义            | 落地要点           |
| -- | ------------- | -------------- |
| 清晰 | 让用户知道每个元素在干什么 | 统一视觉语义，立即反馈    |
| 一致 | 保持交互和视觉统一     | 组件化、Token 化    |
| 直觉 | 操作自然，无需学习     | 用动效和层级暗示逻辑     |
| 轻盈 | 动效自然不过度       | 控制动画节奏与持续时间    |
| 温度 | 语言人性化         | 避免技术语、负面语气     |
| 性能 | 流畅即体验         | 保证 60fps 与加载速度 |

---

## 业务概述

### 🧩二、业务对象与名词定义
| 名称                           | 定义             | 说明                     |
| ---------------------------- | -------------- | ---------------------- |
| **模型（Model）**                | 流程、表单、决策表的设计蓝图 | 在设计器中创建，用于定义逻辑、表单或规则   |
| **流程定义（Process Definition）** | 已发布的流程模板       | 由 BPMN 模型发布生成，用于发起流程实例 |
| **流程实例（Process Instance）**   | 流程定义的运行副本      | 每次发起流程时创建一个新的实例        |
| **任务（Task）**                 | 流程执行中的一个活动节点   | 可分为用户任务、服务任务、脚本任务等     |
| **决策表（DMN Table）**           | 用于业务规则判定的表格    | 结合流程节点调用以实现自动决策        |
| **表单（Form）**                 | 流程节点或任务的输入界面   | 定义字段、布局、校验逻辑           |
| **身份（Identity）**             | 系统用户或用户组       | 参与流程任务的操作者             |
| **权限（Permission）**           | 对系统资源的访问控制     | 控制模型、任务、表单等操作权限        |
| **租户（Tenant）**               | 多组织、多客户隔离的逻辑域  | 不同租户之间数据隔离             |
| **流程审批（Process Approval）**   | 流程实例中的用户操作     | 审批、驳回、转办、加签、撤回等操作      |


## 🧱 三、核心模块功能详述

### 1️⃣ 模型管理（Model Management）

#### 功能目标：

提供统一的模型管理入口，支持流程、表单、决策表等模型的创建、编辑、发布与版本管理。

#### 功能点：

- 模型分类：流程模型、表单模型、决策表模型
- 模型操作：
    - 新建、编辑、复制、删除
    - 草稿与发布版本区分
    - 版本回滚与比对
- 模型元数据：
    - 名称、Key、分类、租户、创建人、修改时间

#### 业务流程：

```
用户 → 模型列表 → 新建模型 → 设计器编辑 → 保存 → 发布 → 生成定义
```

------

### 2️⃣ 流程设计器（Process Designer）

#### 功能目标：

基于 Flowable BPMN Editor 的可视化拖拽设计器，定义业务流程逻辑。

#### 功能点：

- 拖拽组件：
    - 开始事件、结束事件、网关（排他/并行）、用户任务、服务任务、脚本任务、子流程
- 节点配置：
    - 名称、任务类型、处理人配置（用户/角色/表达式）
    - 表单绑定（表单模型）
    - 业务变量（流程字段）
- 连线条件：
    - 基于表达式（如 `${amount > 1000}`）定义分支逻辑
- 版本与发布：
    - 可保存为草稿或发布为正式流程定义
- BPMN XML 导出导入

#### 流程字段：

| 字段名     | 类型    | 说明                   |
| ---------- | ------- | ---------------------- |
| processKey | String  | 流程唯一标识           |
| name       | String  | 流程名称               |
| version    | Integer | 流程版本号             |
| tenantId   | String  | 租户标识               |
| variables  | JSON    | 流程变量集合           |
| formKey    | String  | 绑定表单标识           |
| dmnKey     | String  | 绑定决策表标识（可选） |

------

### 3️⃣ 表单设计器（Form Designer）

#### 功能目标：

为流程节点定义表单，支持可视化表单设计与动态表单数据管理。

#### 功能点：

- 拖拽式表单设计：
    - 输入框、选择框、单选、多选、日期、附件、子表格、自定义组件
- 字段属性：
    - 字段名、标签、占位符、校验规则（必填、正则、最小值等）
    - 默认值、变量绑定
- 表单发布：
    - 可绑定到流程节点或独立使用
- 表单数据结构导出为 JSON Schema

------

### 4️⃣ 决策表管理（DMN Management）

#### 功能目标：

通过决策表定义自动化判断逻辑，用于审批条件、自动任务执行决策。

#### 功能点：

- 表格编辑界面：
    - 条件列（Input）、输出列（Output）
    - 多行规则支持
- 规则优先级与命中策略（如 First/Collect）
- 测试与验证功能
- 可绑定流程任务节点

#### 示例：

| 输入条件          | 输出结果          |
| ----------------- | ----------------- |
| `amount > 10000`  | 审批人=部门经理   |
| `amount <= 10000` | 审批人=普通审批人 |

------

### 5️⃣ 流程实例与任务管理

#### 功能目标：

提供流程运行监控、任务处理与操作入口。

#### 功能点：

- 我的待办任务：
    - 查看待办、已办任务
    - 审批、驳回、加签、转办、撤回
- 流程实例监控：
    - 当前节点、执行历史、变量状态、流程图高亮
- 流程发起：
    - 通过表单发起流程
    - 支持选择流程版本
- 审批记录追踪

------

### 6️⃣ 身份与权限管理（Identity & Permission）

#### 功能目标：

定义用户、角色、权限及其绑定关系，支持多租户隔离。

#### 功能点：

- 用户管理：
    - 用户信息：账号、姓名、邮箱、状态、租户
    - 用户所属角色
- 角色管理：
    - 角色名称、描述、权限集
- 权限点管理：
    - 模型管理权限、流程审批权限、系统管理权限
- 租户管理：
    - 不同租户数据隔离
    - 支持租户管理员分级管理

------

## ⚙️ 四、系统结构与交互流程

```
┌──────────────┐
│ 模型中心      │──┐
└──────────────┘  │
                   ▼
             ┌──────────────┐
             │ 流程定义管理 │
             └──────────────┘
                   │
                   ▼
             ┌──────────────┐
             │ 流程实例运行 │
             └──────────────┘
                   │
                   ▼
             ┌──────────────┐
             │ 任务中心      │
             └──────────────┘
```

------

## 🔒 五、安全与可维护性

- **多租户隔离**：通过 `tenantId` 实现数据逻辑隔离。
- **权限控制**：前后端基于角色和资源路径控制访问。
- **可扩展性**：采用 Flowable REST API + Vue 组件化架构，可快速集成到第三方系统。
- **可维护性**：模块化前端、统一 API 接口、清晰模型依赖。

------